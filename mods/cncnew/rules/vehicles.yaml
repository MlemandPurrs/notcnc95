MCV:
	Inherits: ^Vehicle
	Inherits@selection: ^SelectableSupportUnit
	Inherits@Invuln: ^AcceptsInvulnerabilityCrate
	TransferTimedExternalConditionOnTransform:
		Condition: invulnerability
	Valued:
		Cost: 3000
	Tooltip:
		Name: Mobile Construction Vehicle
    TooltipExtras:
        Strengths:  Allows to expand into another Base
        Canattack:  Unarmed
	Buildable:
		BuildPaletteOrder: 11
		Prerequisites: hq, fix, ~techlevel.medium
		Queue: Vehicle.GDI, Vehicle.Nod
		Description:  Deploys into another Construction Yard.
	Selectable:
		DecorationBounds: 1536, 1536
	Mobile:
		Speed: 71
		Locomotor: heavywheeled
		PauseOnCondition: boarding
	Health:
		HP: 200000
	Armor:
		Type: Heavy
	RevealsShroud:
		Range: 6c0
	Transforms:
		IntoActor: fact
		Offset: -1,-1
		Facing: 432
		TransformSounds: constru2.aud, hvydoor1.aud
		NoTransformNotification: BuildingCannotPlaceAudio
        NoTransformTextNotification: Cannot deploy here.
        Voice: Unload
	MustBeDestroyed:
		RequiredForShortGame: true
	BaseBuilding:
	SpawnActorOnDeath:
		Actor: MCV.Husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
		Probability: 33
	Passenger:
		CustomPipType: pip-blue
	RenderSprites:
		Image: mcv
		FactionImages:
			nod: nodmcv
	Carryable:
		-CarriedCondition:

MCV.Husk:
	Inherits: ^Husk
	Tooltip:
		Name: Mobile Construction Vehicle (Destroyed)
	TransformOnCapture:
		IntoActor: mcv
	RenderSprites:
		Image: mcv.destroyed

HARV:
	Inherits: ^TrackedVehicle
	Inherits@Crates: ^AcceptsAllCrates
	Inherits@selection: ^SelectableEconomicUnit
	Inherits@HARVBALANCE: ^HarvesterBalancer
	Valued:
		Cost: 1000
	Tooltip:
		Name: Harvester
		GenericName: Harvester
    TooltipExtras:
        Strengths:  Collects resources for income
        Canattack:  Unarmed
        Attributes:  Self-repairs when below half Health
	Buildable:
		BuildPaletteOrder: 1
		Prerequisites: proc, ~techlevel.low
		Queue: Vehicle.GDI, Vehicle.Nod
		Description:  Collects Tiberium for processing.
	Selectable:
		DecorationBounds: 1536, 1536
	Harvester:
        DeliveryBuildings: proc, proc.clone
		Resources: Tiberium, BlueTiberium, RedTiberium
		Capacity: 20
		BaleLoadDelay: 12
		BaleUnloadDelay: 6
		SearchFromProcRadius: 15
		SearchFromHarvesterRadius: 8
		HarvestFacings: 8
		EmptyCondition: no-tiberium
	WithHarvesterPipsDecoration:
		Position: BottomLeft
		Margin: 4, 3
		RequiresSelection: true
		PipCount: 7
		ResourceSequences:
			Tiberium: pip-green
			BlueTiberium: pip-blue
            RedTiberium: pip-red
	Mobile:
		Speed: 85
		PauseOnCondition: boarding || emp-crate-collected
	Health:
		HP: 60000
	Armor:
		Type: Medium
	RevealsShroud:
		Range: 4c0
	ActorLostNotification:
		Notification: HarvesterLost
	SpawnActorOnDeath:
		Actor: HARV.Husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
		Probability: 33
	WithHarvestAnimation:
	WithDockingAnimation:
	Explodes@EMPTY:
		Weapon: UnitExplodeHarvEmpty
		EmptyWeapon: UnitExplodeHarvEmpty
	Explodes:
		RequiresCondition: !no-tiberium
		Weapon: TiberiumExplosion
	Passenger:
		CustomPipType: pip-gray
	RenderSprites:
		Image: harv
		FactionImages:
			nod: nodharv
	ProximityExternalCondition@DOCKED:
		Condition: dockinprocess
		Range: 1c0
		ValidRelationships: Ally
	ExternalCondition@DOCKED:
		Condition: docked
		SourceCap: 1
		TotalCap: 1        
	RejectsOrders:
		RequiresCondition: docked
	Carryable:
		RequiresCondition: !docked && !onrefinerybib
	#	this is to prevent a teleporting bug
	ExternalCondition@OnRefineryBib:
		Condition: onrefinerybib
	#	ok, this works
	#	now to make it work for one
	#	at a time and then only for
	#	the one its actually going to
	GrantConditionOnFullHarvester:
		Condition: fullcargo
	GrantConditionOnActivity:
		Activity: FindAndDeliverResources
		Condition: deliveryinc
	GrantCondition@REFANIM:
		Condition: animateref
		RequiresCondition: fullcargo && deliveryinc
	ProximityExternalCondition@REFANIM:
		Condition: dockincoming
		Range: 6c826
		ValidRelationships: Ally
		RequiresCondition: animateref && !emp-crate-collected && !docked
	ChangesHealth:
		Step: 500
		Delay: 25
		StartIfBelow: 51
		DamageCooldown: 25

HARV.Husk:
	Inherits: ^Husk
	Tooltip:
		Name: Harvester (Destroyed)
	TransformOnCapture:
		IntoActor: harv
	RenderSprites:
		Image: harv.destroyed

TRUK:
	Inherits: ^Vehicle
	Inherits@selection: ^SelectableSupportUnit
	Inherits@Speed: ^AcceptsSpeedCrate
	Inherits@Invuln: ^AcceptsInvulnerabilityCrate
	Inherits@EMP: ^AcceptsEMPCrate
	Buildable:
		Queue: Vehicle.GDI, Vehicle.Nod
		BuildPaletteOrder: 12
		Prerequisites: proc, ~techlevel.low
		Description:  Transports cash to other players.
	Valued:
		Cost: 1000
	Tooltip:
		Name: Supply Truck
    TooltipExtras:
        Strengths:  Can deliver to allied Construction Yard
        Canattack:  Unarmed
        Attributes:  Drops a Money crate worth 1000$ on death
	Health:
		HP: 11000
	Armor:
		Type: Light
	Mobile:
		Speed: 128
		PauseOnCondition: boarding || emp-crate-collected
	RevealsShroud:
		Range: 4c0
	DeliversCash:
		Payload: 1000
		Type: MoneyTransfer
		PlayerExperience: 0
	SpawnActorOnDeath:
		Actor: moneycrate
	Passenger:
		CustomPipType: pip-blue
	Carryable:
		-CarriedCondition:

TRUK.Husk:
	Inherits: ^Husk
	Tooltip:
		Name: Supply Truck (Destroyed)
	TransformOnCapture:
		IntoActor: truk
	RenderSprites:
		Image: truk.destroyed

MHQ:
	Inherits: ^Vehicle
	Inherits@Crates: ^AcceptsAllCrates
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Valued:
		Cost: 600
	Tooltip:
		Name: Mobile HQ
    TooltipExtras:
        Strengths:  Strong vs Infantry\nGood Vision radius
        Weaknesses:  Weak vs anything Else
        Canattack: Can attack Ground units
        Attributes:  Detects nearby Stealth units
        Specialabilities:  Jams enemy Radar over distance
	Health:
		HP: 15000
	Armor:
		Type: Heavy
	Mobile:
		Speed: 85
		PauseOnCondition: emp-crate-collected || boarding
	RevealsShroud:
		Range: 8c0
	WithIdleOverlay@SPINNER:
		Sequence: spinner
		Offset: -256,0,256
	DetectCloaked:
		DetectionTypes: GroundStealth, Stealth, AirStealth
		Range: 4c768
		RequiresCondition: !emp-crate-collected
	RenderDetectionCircle:
	Buildable:
		BuildPaletteOrder: 10
		BuildLimit: 1
		Prerequisites: anytier3, ~techlevel.high
		Queue: Vehicle.GDI, Vehicle.Nod
		Description:  Mobile base of operations.\nMaximum one can be built.
	Turreted:
		TurnSpeed: 8
		Offset: 246,-60,112
	Armament:
		Weapon: M16
		MuzzleSequence: muzzle
		LocalOffset: 128,0,43
		PauseOnCondition: emp-crate-collected
	AttackFrontal:
        Voice: Attack
		FacingTolerance: 0
		PauseOnCondition: emp-crate-collected
	AttackMove:
		Voice: Attack
	WithSpriteTurret:
	WithMuzzleOverlay:
	ProximityExternalCondition@JAMMER:
		Range: 16c0
		ValidRelationships: Enemy, Neutral
		Condition: jammed
	WithRangeCircle@JAMMER:
		Type: jammer
		Range: 16c0
		Color: E49430
	Voiced:
		VoiceSet: MoebiusVoice

MHQ.Husk:
	Inherits: ^Husk
	Tooltip:
		Name: Mobile HQ (Destroyed)
	TransformOnCapture:
		IntoActor: mhq
	RenderSprites:
		Image: mhq.destroyed

ARTY:
	Inherits: ^TrackedVehicle
	Inherits@EXPERIENCE: ^GainsExperience
	Inherits@Crates: ^AcceptsAllCrates
	Inherits@AUTOTARGET: ^AutoTargetGroundAssaultMove
	Inherits@ExpBoost: ^NodAffectedByTraining
	Valued:
		Cost: 700
	Tooltip:
		Name: Artillery
    TooltipExtras:
        Strengths:  Strong vs Vehicles and Buildings
        Weaknesses:  Weak vs Infantry and Aircraft\nWeak amount of Hitpoints
        Canattack:  Can attack Ground units
        Attributes:  Attacks frontally, requiring to turn towards target
	UpdatesPlayerStatistics:
		AddToArmyValue: true
	Buildable:
		BuildPaletteOrder: 6
		Prerequisites: hq, ~techlevel.medium
		Queue: Vehicle.GDI, Vehicle.Nod
		Description:  Long-range artillery.
	Mobile:
		TurnSpeed: 16
		Speed: 85
		PauseOnCondition: emp-crate-collected || boarding
	Health:
		HP: 12500
	Armor:
		Type: Light
	RevealsShroud:
		Range: 6c0
	Armament:
		Weapon: ArtilleryShell
		LocalOffset: 624,0,208
		MuzzleSequence: muzzle
	AttackFrontal:
		TargetFrozenActors: True
		ForceFireIgnoresActors: True
		Voice: Attack
		FacingTolerance: 0
		PauseOnCondition: emp-crate-collected
	AttackMove:
		Voice: Attack
	WithMuzzleOverlay:
	AutoTarget:
		InitialStanceAI: Defend
	SpawnActorOnDeath:
		Actor: ARTY.Husk
		OwnerType: InternalName
		EffectiveOwnerFromOwner: true
		Probability: 33
	Explodes:
		Weapon: ArtilleryShell
		EmptyWeapon: UnitExplode
		LoadedChance: 75
	Passenger:
		CustomPipType: pip-yellow
	RenderRangeCircle:
	ReloadArmamentsBar:
		Armaments: primary
		Color: FFFF00

ARTY.Husk:
	Inherits: ^Husk
	Tooltip:
		Name: Artillery (Destroyed)
	TransformOnCapture:
		IntoActor: arty
	RenderSprites:
		Image: arty.destroyed
